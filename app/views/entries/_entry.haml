%div{ :id => dom_id(entry) }
  = entry.user.login  if entry.contest.closed?
  %p= raw Kramdown::Document.new(entry.description).to_html

  - if entry.contest.voting?

    - if current_user && vote = entry.votes.select { |vote| vote.user_id == current_user.id }.first
      = "You voted #{vote.score}/5"
    - else
      = form_for [@contest, entry, Vote.new] do |f|
        - (1..5).to_a.each do |score|
          = f.label "score_#{score}", score
          = f.radio_button :score, score

        = f.submit

  - if entry.contest.closed?

    = "#{sprintf("%.1f", entry.votes.map(&:score).inject { |sum, el| sum + el }.to_f / entry.votes.length)}/5"